!function(){"use strict";let t=!1,e=null,n=null;function o(){return window.gllInfoSettings||{wasmUrl:"/wp-content/plugins/gll-info/assets/wasm/gll.wasm",wasmExecUrl:"/wp-content/plugins/gll-info/assets/wasm/wasm_exec.js"}}function r(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}async function i(i){const s=i.dataset.fileUrl;if(!s)return;const a="true"===i.dataset.showOverview,l="true"===i.dataset.showSources,c=i.querySelector(".gll-info-loading"),d=i.querySelector(".gll-info-content"),u=i.querySelector(".gll-loading-text");try{const i=await async function(r){await async function(){if(!t)return n||(n=(async()=>{try{await new Promise((t,e)=>{if(void 0!==window.Go)return void t();const n=document.createElement("script");n.src=o().wasmExecUrl,n.onload=t,n.onerror=()=>e(new Error("Failed to load wasm_exec.js")),document.head.appendChild(n)});const e=new window.Go,n=await fetch(o().wasmUrl);if(!n.ok)throw new Error(`Failed to fetch WASM: ${n.status}`);const r=await WebAssembly.instantiateStreaming(n,e.importObject);if(e.run(r.instance),"function"!=typeof window.parseGLL)throw new Error("WASM module did not export parseGLL function");t=!0}catch(t){throw e=t,t}})(),n)}();const i=await fetch(r);if(!i.ok)throw new Error(`Failed to fetch GLL file: ${i.status}`);const s=await i.arrayBuffer(),a=new Uint8Array(s),l=window.parseGLL(a),c=JSON.parse(l);if(!c.success)throw new Error(c.error||"Failed to parse GLL file");return c.data}(s);u&&i.GenSystem?.Label&&(u.textContent=i.GenSystem.Label);let f="";a&&(f+=function(t){const{GenSystem:e,Metadata:n}=t;let o="";return e&&(o+='<div class="gll-section"><h4>System Information</h4>',o+='<table class="gll-info-table"><tbody>',e.Label&&(o+=`<tr><th>Label</th><td>${r(e.Label)}</td></tr>`),e.Version&&(o+=`<tr><th>Version</th><td>${r(e.Version)}</td></tr>`),void 0!==e.SystemType&&(o+=`<tr><th>Type</th><td>${["Line Array","Cluster","Loudspeaker"][e.SystemType]||"Unknown"}</td></tr>`),e.Manufacturer&&(o+=`<tr><th>Manufacturer</th><td>${r(e.Manufacturer)}</td></tr>`),o+="</tbody></table></div>"),n&&n.Description&&(o+=`<div class="gll-section"><h4>Description</h4><p>${r(n.Description)}</p></div>`),o}(i)),l&&(f+=function(t){if(!t?.Database?.SourceDefinitions?.length)return"";const e=t.Database.SourceDefinitions;let n=`<div class="gll-sources"><h4>Acoustic Sources (${e.length})</h4>`;n+='<ul class="gll-sources-list">';for(const t of e){const e=t.Definition?.Label||t.Key,o=t.Definition?.NominalBandwidthFrom,i=t.Definition?.NominalBandwidthTo;n+='<li class="gll-source-item">',n+=`<strong>${r(e)}</strong>`,o&&i&&(n+=`<span class="gll-source-bandwidth">${Math.round(o)} - ${Math.round(i)} Hz</span>`),n+="</li>"}return n+="</ul></div>",n}(i)),d&&(d.innerHTML=f,d.style.display=""),c&&(c.style.display="none")}catch(t){c&&(c.innerHTML=`\n\t\t\t\t\t<div class="gll-info-error">\n\t\t\t\t\t\t<p>Error loading GLL file:</p>\n\t\t\t\t\t\t<code>${r(t.message)}</code>\n\t\t\t\t\t</div>\n\t\t\t\t`)}}function s(){document.querySelectorAll(".wp-block-gll-info-gll-info").forEach(i)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s()}();