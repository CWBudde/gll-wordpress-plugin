# Copilot instructions for gll-wordpress-plugin

## Big picture architecture
- WordPress Gutenberg plugin for GLL files; PHP entry point [gll-info.php](../gll-info.php) registers CPT `gll_file`, registers blocks from build/blocks-manifest.php, and localizes `gllInfoSettings` (WASM URLs, plugin URL, REST nonce). Frontend assets are enqueued only when `has_block('gll-info/gll-info')` is true.
- GLL parsing is client-side WASM (Go): assets in assets/wasm. Loader is a singleton in [src/shared/wasm-loader.js](../src/shared/wasm-loader.js) and exposes `initWasm()` + `parseGLL(...)`.
- Shared parsed data uses React Context in [src/shared/gll-context.js](../src/shared/gll-context.js): use `GLLProvider` + `useGLL()` for shared state, or `useGLLLoader()` for one-off parsing.
- Block pattern: each block lives under src/<block>/ with block.json, index.js, edit.js, save.js, view.js, editor.scss, style.scss (see [src/gll-info](../src/gll-info) and [src/frequency-response](../src/frequency-response)). The save component writes data-* attributes for the frontend view.js to hydrate (example: [src/frequency-response/save.js](../src/frequency-response/save.js)).
- Chart utilities are centralized in [src/shared/charting-utils.js](../src/shared/charting-utils.js); reuse these for frequency response and future plots.
- Media library integration for .gll lives in [includes/class-gll-media.php](../includes/class-gll-media.php) (MIME registration + placeholder icon).

## Developer workflows
- Dev build (watch): `npm start`
- Production build: `npm run build`
- Lint JS/CSS: `npm run lint:js`, `npm run lint:css`
- Format: `npm run format`
- Plugin zip: `npm run plugin-zip`

## Project conventions
- Edit source in src/ and SCSS there; build/ is generated by wp-scripts (blocks-manifest enabled in scripts).
- Use the WASM loader + context hooks instead of accessing `window.parseGLL` directly.
- Keep block attributes consistent for GLL file selection: `fileId`, `fileUrl`, `fileName` (see [src/gll-info/block.json](../src/gll-info/block.json)).
- Frontend rendering is handled in view.js per block; editor rendering stays in edit.js and uses WordPress component APIs.

## Integration points
- WASM assets: assets/wasm/gll.wasm and assets/wasm/wasm_exec.js (URLs injected via `gllInfoSettings`).
- Chart.js is a runtime dependency (see package.json) and used in frequency response view.js.
